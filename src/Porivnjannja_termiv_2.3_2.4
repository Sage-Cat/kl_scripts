/**Перебирає усі комбінації ДНФ (завд 2.3)
*@customfunction
* @param {text} текст, який перевіряють
* @param {text} текст, який є правильним
* @return {bool} результат перевірки
* @constructor
*/
function CheckForKNF(text, res)
{  
  let starttext = text.split(")")
  let impl = []

  for (i = 0; i < starttext.length - 1; i++)
  {
    impl[i] = starttext[i].replace("(", "")
  }

  resAr = []
  comb = get_Permutations(impl, impl.length); //функція для комбінацій
  for(i = 0; i < comb.length; i++) // цикл для запису із +
  {
    let restext = "(" + comb[i][0];
    for(j = 1; j < impl.length; j++)
    {
      restext += ")(" + comb[i][j];
    }
    restext += ")";
    resAr[i] = restext;
  }
  resret = false; // немає збігу
  for(i = 0; i < resAr.length; i++)
  {
    if(resAr[i] === res)
    {
      resret = true; // якщо є збіг з комбінацій - переставляє, інакше - не змінюється
    }
  }
  
  return resret; 
 
}

/**Перебирає усі комбінації КНФ (завд 2.4)
*@customfunction
* @param {text} текст, який перевіряють
* @param {text} текст, який є правильним
* @return {bool} результат перевірки
* @constructor
*/

function CheckForDNF(text, res)
{
  let impl = text.split("+"); //сплітає +
  resAr = []
  comb = get_Permutations(impl, impl.length); //функція для комбінацій
  for(i = 0; i < comb.length; i++) // цикл для запису із +
  {
    let restext = comb[i][0];
    for(j = 1; j < impl.length; j++)
    {
      restext += "+" + comb[i][j];
    }
    resAr[i] = restext;
  }
   resret = false; // немає збігу
  for(i = 0; i < resAr.length; i++)
  {
    if(resAr[i] === res)
    {
      resret = true; // якщо є збіг з комбінацій - переставляє, інакше - не змінюється
    }
  }
  return resret;
}

// приватна функція (до CheckForKNF та CheckForDNF)
function get_Permutations(arr, select) {
    if (select === 0) {
        return [[]]; // Пустий масив - одна можлива комбінація
    }

    if (arr.length < select) {
        return []; // Немає можливих комбінацій
    }

    if (select === 1) {
        return arr.map(function(item) {
            return [item];
        });
    }

    var permutations = [];
    for (var i = 0; i < arr.length; i++) {
        var item = arr[i];
        var rest = arr.slice(0, i).concat(arr.slice(i + 1));
        var subPermutations = get_Permutations(rest, select - 1);
        for (var j = 0; j < subPermutations.length; j++) {
            permutations.push([item].concat(subPermutations[j]));
        }
    }
    return permutations;
}
